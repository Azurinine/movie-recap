<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Episode Search</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container">
    <h1>Search Episodes</h1>
    <input type="text" id="searchInput" placeholder="Enter search query" />
    <button onclick="performSearch()">Search</button>
    <div id="episodesList" class="episodes-list"></div>
  </div>

  <script>
    // Function to perform the search and display results
    function performSearch() {
      const query = document.getElementById("searchInput").value;

      fetch(`/api/search?query=${encodeURIComponent(query)}`)
        .then(res => res.json())  // Parse the JSON response
        .then(episodes => {
          const episodesContainer = document.getElementById("episodesList");
          episodesContainer.innerHTML = '';  // Clear previous results

          if (episodes.length === 0) {
            episodesContainer.innerHTML = '<p>No episodes found.</p>';
            return;
          }

          // Loop through each episode and create HTML elements to display
          episodes.forEach(episode => {
            const episodeElement = document.createElement("div");
            episodeElement.classList.add("episode");

            episodeElement.innerHTML = `
              <h2>${episode.name} (Episode ${episode.number})</h2>
              <p><strong>Rating:</strong> ${episode.rating}</p>
              <p><strong>Summary:</strong> ${episode.summary}</p>
            `;

            // Append the episode element to the list
            episodesContainer.appendChild(episodeElement);
          });
        })
        .catch(err => {
          document.getElementById("episodesList").innerHTML = 'Error fetching episodes: ' + err;
        });
    }
  </script>

</body>
</html>
